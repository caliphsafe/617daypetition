<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Declaration of 617 Day — Petition</title>

  <style>
    :root{
      --ink: #4a3a2d;            /* parchment ink vibe */
      --ink2: rgba(74,58,45,.78);
      --paperShadow: rgba(0,0,0,.25);

      --maxW: 860px;
      --padX: 18px;
      --radius: 18px;

      --fieldBg: rgba(255,255,255,.55);
      --fieldStroke: rgba(74,58,45,.18);
      --btnBg: rgba(74,58,45,.92);
      --btnBgHover: rgba(74,58,45,1);
      --btnText: #f7f1e8;
    }

    *{ box-sizing: border-box; }
    html, body{ height: 100%; }
    body{
      margin: 0;
      font-family: Georgia, "Times New Roman", Times, serif;
      color: var(--ink);
      background: #0f0f12;
      overflow-x: hidden;
    }

    /* Full-page background image (your combined artwork) */
    .bg{
      position: fixed;
      inset: 0;
      background-image: url("declaration-bg.png");
      background-size: cover;
      background-position: top center;
      background-repeat: no-repeat;
      transform: translateZ(0);
      z-index: -2;
    }

    /* Subtle dark vignette for legibility */
    .vignette{
      position: fixed;
      inset: 0;
      background: radial-gradient(ellipse at center, rgba(0,0,0,.05) 0%, rgba(0,0,0,.28) 70%, rgba(0,0,0,.42) 100%);
      z-index: -1;
      pointer-events: none;
    }

    /* Layout wrapper */
    .wrap{
      min-height: 100vh;
      padding: clamp(18px, 3.5vw, 44px) var(--padX);
      display: flex;
      justify-content: center;
    }

    /* “Document reading area” */
    .doc{
      width: min(var(--maxW), 100%);
      margin-top: clamp(140px, 22vh, 260px); /* pushes content under the People Of Boston line visually */
      padding: clamp(16px, 2.5vw, 28px);
      border-radius: var(--radius);
      position: relative;

      /* Transparent so the background parchment shows through */
      background: rgba(255,255,255,0.0);
      text-shadow: 0 1px 0 rgba(255,255,255,.35);
    }

    .doc p{
      margin: 0 0 14px 0;
      line-height: 1.62;
      font-size: clamp(16px, 1.7vw, 18px);
      color: var(--ink2);
    }

    /* This makes it feel like the parchment continues and fades out as you scroll */
    .fade-bottom{
      position: sticky;
      bottom: 0;
      height: 140px;
      margin-top: 24px;
      pointer-events: none;
      background: linear-gradient(to bottom, rgba(255,255,255,0) 0%, rgba(15,15,18,.0) 20%, rgba(15,15,18,.75) 100%);
      border-radius: 0 0 var(--radius) var(--radius);
    }

    .section-title{
      margin: 26px 0 10px;
      font-weight: 700;
      letter-spacing: .03em;
      text-transform: uppercase;
      font-size: 13px;
      color: rgba(74,58,45,.78);
    }

    .sign-area{
      margin-top: 28px;
      padding: 16px;
      border-radius: 14px;
      background: rgba(255,255,255,.22);
      box-shadow: 0 10px 30px var(--paperShadow);
      backdrop-filter: blur(6px);
      -webkit-backdrop-filter: blur(6px);
      border: 1px solid rgba(255,255,255,.18);
    }

    form{
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
      align-items: end;
    }

    .field{
      display: flex;
      flex-direction: column;
      gap: 6px;
    }

    label{
      font-size: 12px;
      letter-spacing: .02em;
      color: rgba(74,58,45,.8);
    }

    input{
      width: 100%;
      padding: 11px 12px;
      border-radius: 12px;
      border: 1px solid var(--fieldStroke);
      background: var(--fieldBg);
      color: var(--ink);
      outline: none;
      font-size: 15px;
    }

    input:focus{
      border-color: rgba(74,58,45,.35);
      box-shadow: 0 0 0 3px rgba(74,58,45,.10);
    }

    .full{
      grid-column: 1 / -1;
    }

    .btn{
      grid-column: 1 / -1;
      display: inline-flex;
      justify-content: center;
      align-items: center;
      gap: 10px;
      padding: 12px 14px;
      border-radius: 12px;
      border: 0;
      background: var(--btnBg);
      color: var(--btnText);
      font-weight: 700;
      letter-spacing: .02em;
      cursor: pointer;
      transition: transform .08s ease, background .15s ease, opacity .15s ease;
    }
    .btn:hover{ background: var(--btnBgHover); }
    .btn:active{ transform: translateY(1px); }

    .note{
      margin-top: 10px;
      font-size: 12px;
      color: rgba(74,58,45,.72);
    }

    .signatures{
      margin-top: 16px;
      border-top: 1px dashed rgba(74,58,45,.25);
      padding-top: 12px;
    }

    .sig{
      display: flex;
      justify-content: space-between;
      gap: 12px;
      padding: 10px 8px;
      border-radius: 10px;
      background: rgba(255,255,255,.20);
      margin-bottom: 10px;
    }

    .sig .who{
      font-weight: 700;
      color: rgba(74,58,45,.9);
    }

    .sig .meta{
      color: rgba(74,58,45,.75);
      font-size: 13px;
      white-space: nowrap;
    }

    .empty{
      padding: 10px 8px;
      color: rgba(74,58,45,.7);
      font-size: 13px;
    }

    /* Mobile: stack inputs */
    @media (max-width: 720px){
      .doc{
        margin-top: clamp(120px, 18vh, 200px);
      }
      form{ grid-template-columns: 1fr; }
      .sig{
        flex-direction: column;
        align-items: flex-start;
      }
      .sig .meta{ white-space: normal; }
    }
  </style>
</head>

<body>
  <div class="bg" aria-hidden="true"></div>
  <div class="vignette" aria-hidden="true"></div>

  <main class="wrap">
    <article class="doc" aria-label="Declaration text and petition">
      <!-- Text starts “under the People Of Boston line” visually because of margin-top on .doc -->
      <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi tincidunt, metus et iaculis dignissim, lorem lorem luctus massa, vel mattis massa lorem id est. Integer laoreet, arcu non cursus ultrices, urna neque commodo nibh, a luctus libero massa non ipsum.</p>
      <p>Praesent feugiat, metus non posuere porttitor, orci lectus aliquet eros, a condimentum arcu arcu id nulla. Duis nec sapien ac ante sagittis feugiat. Sed ullamcorper, sem sit amet mollis porttitor, purus neque sodales justo, sed dignissim metus magna quis est.</p>
      <p>Donec at lectus sed massa placerat porttitor. Curabitur elementum, velit sed ullamcorper tincidunt, est nisi egestas leo, sed eleifend lorem eros at lectus. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia curae.</p>
      <p>Aliquam erat volutpat. Maecenas ut bibendum massa. In quis dolor sed erat bibendum viverra. Integer posuere, neque sed dictum pretium, ipsum orci luctus massa, quis tincidunt sapien urna non nisl.</p>
      <p>Sed vitae ligula a odio tincidunt blandit. Aenean varius, nibh non posuere luctus, dolor ipsum pellentesque orci, at luctus enim arcu at velit. Aenean sit amet orci ut risus facilisis mattis.</p>

      <div class="section-title">Sign the Declaration</div>

      <section class="sign-area" aria-label="Signature form and signatures">
        <form id="signForm" autocomplete="on">
          <div class="field">
            <label for="firstName">First name</label>
            <input id="firstName" name="firstName" required maxlength="40" />
          </div>

          <div class="field">
            <label for="lastName">Last name</label>
            <input id="lastName" name="lastName" required maxlength="60" />
          </div>

          <div class="field full">
            <label for="area">Part of the city you’re from (e.g., Dorchester)</label>
            <input id="area" name="area" required maxlength="80" />
          </div>

          <div class="field">
            <label for="email">Email</label>
            <input id="email" name="email" type="email" required />
          </div>

          <div class="field">
            <label for="zip">Zip code</label>
            <input id="zip" name="zip" inputmode="numeric" pattern="\\d{5}" title="Enter a 5-digit zip code" required maxlength="5" />
          </div>

          <button class="btn" type="submit">Sign the Declaration</button>

          <div class="note full">
            Your signature is stored in this browser (demo). For a real public petition, connect a database.
          </div>
        </form>

        <div class="signatures" aria-label="Signatures list">
          <div class="section-title" style="margin-top:0">Recent Signatures</div>
          <div id="sigList"></div>
        </div>
      </section>

      <!-- scroll fade -->
      <div class="fade-bottom" aria-hidden="true"></div>
    </article>
  </main>

  <script>
    const STORAGE_KEY = "decl617_signatures_v1";

    function loadSigs(){
      try{
        return JSON.parse(localStorage.getItem(STORAGE_KEY) || "[]");
      }catch(e){
        return [];
      }
    }

    function saveSigs(sigs){
      localStorage.setItem(STORAGE_KEY, JSON.stringify(sigs));
    }

    function formatSignature(sig){
      const first = (sig.firstName || "").trim();
      const last = (sig.lastName || "").trim();
      const lastInitial = last ? (last[0].toUpperCase() + ".") : "";
      const area = (sig.area || "").trim();
      const zip = (sig.zip || "").trim();

      return {
        who: `${cap(first)} ${lastInitial}`.trim(),
        meta: `${area} • ${zip}`
      };
    }

    function cap(s){
      if(!s) return "";
      return s.charAt(0).toUpperCase() + s.slice(1);
    }

    function render(){
      const list = document.getElementById("sigList");
      const sigs = loadSigs().slice(-12).reverse(); // show latest 12

      if(!sigs.length){
        list.innerHTML = `<div class="empty">Be the first to sign.</div>`;
        return;
      }

      list.innerHTML = sigs.map(s => {
        const f = formatSignature(s);
        return `
          <div class="sig">
            <div class="who">${escapeHtml(f.who)}</div>
            <div class="meta">${escapeHtml(f.meta)}</div>
          </div>
        `;
      }).join("");
    }

    function escapeHtml(str){
      return String(str)
        .replaceAll("&","&amp;")
        .replaceAll("<","&lt;")
        .replaceAll(">","&gt;")
        .replaceAll('"',"&quot;")
        .replaceAll("'","&#039;");
    }

    document.getElementById("signForm").addEventListener("submit", (e) => {
      e.preventDefault();

      const firstName = document.getElementById("firstName").value.trim();
      const lastName  = document.getElementById("lastName").value.trim();
      const area      = document.getElementById("area").value.trim();
      const email     = document.getElementById("email").value.trim();
      const zip       = document.getElementById("zip").value.trim();

      // Minimal validation
      if(!/^\d{5}$/.test(zip)){
        alert("Please enter a valid 5-digit zip code.");
        return;
      }

      const sigs = loadSigs();
      sigs.push({
        firstName, lastName, area, email, zip,
        signedAt: new Date().toISOString()
      });

      saveSigs(sigs);

      // Refresh like you asked
      location.reload();
    });

    // Initial render (after refresh, it will show their signature)
    render();
  </script>
</body>
</html>
